$def with (modify_type, modifiedModulesSummary, modifiedModulesMounting, modifiedModulesQuota, modifiedModulesDetails, targetModuleCode, targetModuleModifiedInfo)

$var title:View modified modules

<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <h1 class="text-center"><b>Modified Modules</b></h1>
            <p class="text-center">Shows all modules that have been modified</p>
            <br>
            $if targetModuleCode is not None:
                $if modify_type == "mounting":
                    $ moduleCode = targetModuleModifiedInfo[0]
                    $ moduleName = targetModuleModifiedInfo[1]
                    <h2>Modified Mounting of <b>$targetModuleCode</b> ($moduleName)</h2>
                    <p><b>Illustration of mounting changes is with respect to the mounting of the same module for the current semester.</b></p>
                    <br>
                    <table class="table table-hover text-center" id="specific-modified-module">
                        $ currentAySem = targetModuleModifiedInfo[2]
                        $ targetAySem = targetModuleModifiedInfo[3]
                        $ mountingChange = targetModuleModifiedInfo[4]
                        <tbody>
                            $if mountingChange == 1:
                                <tr>
                                    <td><b>Mounting for Current Sem ($currentAySem)</b></td>
                                    <td>Unmounted</td>
                                </tr>
                                <tr>
                                    <td><b>Mounting for Target Sem ($targetAySem)</b></td>
                                    <td>Mounted</td>
                                </tr>
                                <tr>
                                    <td><b>Change applied:</b></td>
                                    <td>Unmounted &#8594; Mounted</td>
                                </tr>
                                <tr>
                                    <td><b>Action:</b></td>
                                    <td>
                                        <form action="/viewModule" method="get">
                                            <input type="hidden" name="code" value="$moduleCode">
                                            <input class="btn btn-primary" type="submit" value="View Module"/>
                                        </form>
                                        <form action="/restoreModule" method="post" onsubmit="if(!confirm('Are you sure you want to restore this module\'s mounting status?')){event.preventDefault();}">
                                            <input type="hidden" name="code" value="$moduleCode">
                                            <input type="hidden" name="currentAySem" value="$currentAySem">
                                            <input type="hidden" name="targetAySem" value="$targetAySem">
                                            <input type="hidden" name="mountingChange" value="$mountingChange">
                                            <input type="hidden" name="restoreType" value="mounting">
                                            <input class="btn btn-primary" type="submit" value="Restore Mounting"/>
                                        </form>
                                    </td>
                                </tr>
                            $elif mountingChange == 0:
                                <tr>
                                    <td>Mounting for <b>Current Semester ($currentAySem)</b></td>
                                    <td>Mounted</td>
                                </tr>
                                <tr>
                                    <td>Mounting for <b>Target Semester ($targetAySem)</b></td>
                                    <td>Unmounted</td>
                                </tr>
                                <tr>
                                    <td>Change in Mounting Status from Current Semester:</td>
                                    <td><b>Mounted &#8594; Unmounted</b></td>
                                </tr>
                                <tr>
                                    <td>Actions:</td>
                                    <td>
                                        <form action="/viewModule" method="get">
                                            <input type="hidden" name="code" value="$moduleCode">
                                            <input class="btn btn-primary" type="submit" value="View Module"/>
                                        </form>
                                        <form action="/restoreModule" method="post" onsubmit="if(!confirm('Are you sure you want to restore this module\'s mounting status?')){event.preventDefault();}">
                                            <input type="hidden" name="code" value="$moduleCode">
                                            <input type="hidden" name="currentAySem" value="$currentAySem">
                                            <input type="hidden" name="targetAySem" value="$targetAySem">
                                            <input type="hidden" name="mountingChange" value="$mountingChange">
                                            <input type="hidden" name="restoreType" value="mounting">
                                            <input class="btn btn-danger" type="submit" value="Restore Mounting"/>
                                        </form>
                                    </td>
                                </tr>
                        </tbody>
                    </table>
                $elif modify_type == "quota":
                    $ moduleCode = targetModuleModifiedInfo[0]
                    $ moduleName = targetModuleModifiedInfo[1]
                    <h2>Modified Quota of <b>$targetModuleCode</b> ($moduleName)</h2>
                    <p><b>Illustration of changes in module quota is with respect to the module quota of the same module for the current semester.</b></p>
                    <br>
                    <table class="table table-hover text-center">
                        $ currentAySem = targetModuleModifiedInfo[2]
                        $ targetAySem = targetModuleModifiedInfo[3]
                        $ currentQuota = targetModuleModifiedInfo[4]
                        $ targetQuota = targetModuleModifiedInfo[5]
                        $ quotaChange = targetModuleModifiedInfo[6]
                        <tbody>
                            <tr>
                                <td>Quota for <b>Current Semester ($currentAySem)</b></td>
                            $if currentQuota is None:
                                <td>?</td>
                            $else:
                                <td>$currentQuota</td>
                            </tr>
                            <tr>
                                <td>Quota for <b>Target Semester ($targetAySem)</b></td>
                            $if targetQuota is None:
                                <td>?</td>
                            $else:
                                <td>$targetQuota</td>
                            </tr>
                            $if True:
                            <tr>
                                <td>Change in Quota from Current Semester:</td>
                                <td>$quotaChange</td>
                            </tr>
                            <tr>
                                <td>Actions:</td>
                                <td>
                                    <form action="/viewModule" method="get">
                                        <input type="hidden" name="code" value="$moduleCode">
                                        <input class="btn btn-primary" type="submit" value="View Module"/>
                                    </form>
                                $if currentQuota == "Unmounted" or targetQuota == "Unmounted":
                                    <form action="/modifiedModules" method="get" onsubmit="alert('To restore this module\'s quota, the module\'s mounting has to be restored.');">
                                        <input type="hidden" name="modifyType" value="mounting">
                                        <input type="hidden" name="code" value="$moduleCode">
                                        <input class="btn btn-danger" type="submit" value="Restore Quota"/>
                                    </form>                    
                                $else:
                                    <form action="/restoreModule" method="post" onsubmit="if(!confirm('Are you sure you want to restore this module\'s quota?')){event.preventDefault();}">
                                        <input type="hidden" name="code" value="$moduleCode">
                                        <input type="hidden" name="targetAySem" value="$targetAySem">
                                        <input type="hidden" name="quota" value="$currentQuota">
                                        <input type="hidden" name="restoreType" value="quota">
                                        <input class="btn btn-danger" type="submit" value="Restore Quota"/>
                                    </form>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                $elif modify_type == "moduleDetails":
                    $ moduleCode = targetModuleModifiedInfo[0]
                    $ moduleName = targetModuleModifiedInfo[1]
                    <h2>Modified Module Details of <b>$targetModuleCode</b> ($moduleName)</h2>
                    <p><b>Illustration of changes in module details is with respect to the module details of the same module for the current semester.</b></p>
                    <br>
                    <table class="table table-hover text-center">
                        $ isNameModified = targetModuleModifiedInfo[2][0] is not None
                        $ isDescModified = targetModuleModifiedInfo[2][1] is not None
                        $ isMcModified = targetModuleModifiedInfo[2][2] is not None
                        <tbody>
                            <tr>
                                <td>Change in Module Name:</td>
                        $if isNameModified is True:
                            $ originalName = targetModuleModifiedInfo[2][0][0]
                            $ modifiedName = targetModuleModifiedInfo[2][0][1]
                            <td>
                                <b>From</b><br><br>
                                <i>"$originalName"</i><br><br>
                                <b>to</b><br><br>
                                <i>"$modifiedName"</i><br><br>
                            </td>
                        $else:
                            <td>None</td>
                        </tr>
                        <tr>
                            <td>Change in Module Description:</td>
                        $if isDescModified is True:
                            $ originalDesc = targetModuleModifiedInfo[2][1][0]
                            $ modifiedDesc = targetModuleModifiedInfo[2][1][1]
                            <td>
                                <b>From</b><br><br>
                                <i>"$originalDesc"</i><br><br>
                                <b>to</b><br><br>
                                <i>"$modifiedDesc"</i><br><br>
                            </td>
                        $else:
                            <td>None</td>
                        </tr>
                        <tr>
                            <td>Change in Module MCs:</td>
                        $if isMcModified is True:
                            $ originalMc = targetModuleModifiedInfo[2][2][0]
                            $ modifiedMc = targetModuleModifiedInfo[2][2][1]
                            <td>
                                <b>From</b> <i>"$originalMc"</i><br><br>
                                <b>to</b> <i>"$modifiedMc"</i><br><br>
                            </td>
                        $else:
                            <td>None</td>
                        </tr>
                        <tr>
                            <td>Actions:</td>
                        $if True:
                            <td>
                                <form action="/viewModule" method="get">
                                    <input type="hidden" name="code" value="$targetModuleModifiedInfo[0]">
                                    <input class="btn btn-primary" type="submit" value="View Module"/>
                                </form>
                                <form action="/restoreModule" method="post" onsubmit="if(!confirm('Are you sure you want to restore this module\'s details?')){event.preventDefault();}">
                                    <input type="hidden" name="code" value="$targetModuleModifiedInfo[0]">
                                    <input type="hidden" name="restoreType" value="moduleDetails">
                                    <input class="btn btn-danger" type="submit" value="Restore Details"/>
                                </form>
                            </td>
                        </tr>
                        </tbody>
                    </table>
            $else:
                <ul class="nav nav-tabs nav-justified">
                    <li class="active"><a data-toggle="tab" href="#all">Module Modification Summary</a></li>
                    <li><a data-toggle="tab" href="#mounting">Modules with Modified Mounting</a></li>
                    <li><a data-toggle="tab" href="#quota">Modules with Modified Quota</a></li>
                    <li><a data-toggle="tab" href="#moduleDetails">Modules with Modified Details</a></li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" id="all">
                        <h2>Module Modification Summary</h2><br>
                        <table class="table display dataTable table-bordered table-hover text-center" id="modified-modules-summary-table">
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Name</th>
                                    <th>Is Mounting Modified?</th>
                                    <th>Is Quota Modified?</th>
                                    <th>Is Module Details Modified?</th>
                                    <th data-sortable="false">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                $for module in modifiedModulesSummary:
                                    $ moduleCode = module[0]
                                    $ moduleName = module[1]
                                    $ isMountingModified = module[2]
                                    $ isQuotaModified = module[3]
                                    $ isDetailsModified = module[4]
                                    <tr>
                                        <td><a href="/viewModule?code=$moduleCode" target="_blank" data-toggle="tooltip" title="View general info for $moduleCode">$moduleCode</a></td>
                                        <td>$moduleName</td>
                                        <td>
                                        $if isMountingModified is True:
                                            <u><a href="/modifiedModules?modifyType=mounting&amp;code=$moduleCode" target="_blank">Yes</a></u>
                                        $else:
                                            No
                                        </td>
                                        <td>
                                        $if isQuotaModified is True:
                                            <u><a href="/modifiedModules?modifyType=quota&amp;code=$moduleCode" target="_blank">Yes</a></u>
                                        $else:
                                            No
                                        </td>
                                        <td>
                                        $if isDetailsModified is True:
                                            <u><a href="/modifiedModules?modifyType=moduleDetails&amp;code=$moduleCode" target="_blank">Yes</a></u>
                                        $else:
                                            No
                                            </td>
                                        <td>
                                            <form action="/viewModule" method="get">
                                                <input type="hidden" name="code" value="$moduleCode">
                                                <input class="btn btn-primary" type="submit" value="View Module"/>
                                            </form>
                                        </td>
                                    </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane" id="mounting">
                        <h2>Modules with Modified Mounting</h2><br>
                        <table class="table display dataTable table-bordered table-hover text-center" id="modified-modules-mounting-table">
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Name</th>
                                    <th>Current AY-Semester</th>
                                    <th>Target AY-Semester</th>
                                    <th>Mounting Change</th>
                                    <th data-sortable="false">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                $if modifiedModulesMounting is None or len(modifiedModulesMounting) == 0:
                                    <tr><td colspan=5>No data found</td></tr>
                                $else:
                                    $for module in modifiedModulesMounting:
                                        $ moduleCode = module[0]
                                        $ moduleName = module[1]
                                        $ currentAySem = module[2]
                                        $ targetAySem = module[3]
                                        $ mountingChange = module[4]
                                        <tr>
                                            <td><a href="/viewModule?code=$moduleCode" target="_blank" data-toggle="tooltip" title="View general info for $moduleCode">$moduleCode</a></td>
                                            <td>$moduleName</td>
                                            <td>$currentAySem</td>
                                            <td>$targetAySem</td>
                                        $if mountingChange == 1:
                                            <td>Unmounted (in current AY-Sem) &#8594; Mounted (in target AY-Sem)</td>
                                        $elif mountingChange == 0:
                                            <td>Mounted (in current AY-Sem) &#8594; Unmounted (in target AY-Sem)</td>
                                        $if True:
                                            <td>
                                                <form action="/viewModule" method="get">
                                                    <input type="hidden" name="code" value="$moduleCode">
                                                    <input class="btn btn-primary" type="submit" value="View Module"/>
                                                </form>
                                                <form action="/restoreModule" method="post" onsubmit="if(!confirm('Are you sure you want to restore this module\'s mounting status?')){event.preventDefault();}">
                                                    <input type="hidden" name="code" value="$moduleCode">
                                                    <input type="hidden" name="currentAySem" value="$currentAySem">
                                                    <input type="hidden" name="targetAySem" value="$targetAySem">
                                                    <input type="hidden" name="mountingChange" value="$mountingChange">
                                                    <input type="hidden" name="restoreType" value="mounting">
                                                    <input class="btn btn-danger" type="submit" value="Restore Mounting"/>
                                                </form>
                                            </td>
                                        </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane" id="quota">
                        <h2>Modules with Modified Quota</h2><br>
                        <table class="table display dataTable table-bordered table-hover text-center" id="modified-modules-quota-table">
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Name</th>
                                    <th>Current AY-Semester</th>
                                    <th data-sortable="false">Quota for Current AY-Semester</th>
                                    <th>Target AY-Semester</th>
                                    <th data-sortable="false">Quota for Target AY-Semester</th>
                                    <th>Change in Quota</th>
                                    <th data-sortable="false">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                $if modifiedModulesQuota is None or len(modifiedModulesQuota) == 0:
                                    <tr><td colspan=8>No data found</td></tr>
                                $else:
                                    $for module in modifiedModulesQuota:
                                        $ moduleCode = module[0]
                                        $ moduleName = module[1]
                                        $ currentAySem = module[2]
                                        $ targetAySem = module[3]
                                        $ currentQuota = module[4]
                                        $ targetQuota = module[5]
                                        $ quotaChange = module[6]
                                        <tr>
                                            <td><a href="/viewModule?code=$moduleCode" target="_blank" data-toggle="tooltip" title="View general info for $moduleCode">$moduleCode</a></td>
                                            <td>$moduleName</td>
                                            <td>$currentAySem</td>
                                        $if currentQuota is None:
                                            <td>?</td>
                                        $else:
                                            <td>$currentQuota</td>
                                        <td>$targetAySem</td>
                                        $if targetQuota is None:
                                            <td>?</td>
                                        $else:
                                            <td>$targetQuota</td>
                                        $if True:
                                            <td>$quotaChange</td>
                                            <td>
                                                <form action="/viewModule" method="get">
                                                    <input type="hidden" name="code" value="$moduleCode">
                                                    <input class="btn btn-primary" type="submit" value="View Module"/>
                                                </form>
                                            $if currentQuota == "Unmounted" or targetQuota == "Unmounted":
                                                <form action="/modifiedModules" method="get" onsubmit="alert('To restore this module\'s quota, the module\'s mounting has to be restored.');">
                                                    <input type="hidden" name="modifyType" value="mounting">
                                                    <input type="hidden" name="code" value="$moduleCode">
                                                    <input class="btn btn-danger" type="submit" value="Restore Quota"/>
                                                </form>                    
                                            $else:
                                                <form action="/restoreModule" method="post" onsubmit="if(!confirm('Are you sure you want to restore this module\'s quota?')){event.preventDefault();}">
                                                    <input type="hidden" name="code" value="$moduleCode">
                                                    <input type="hidden" name="targetAySem" value="$targetAySem">
                                                    <input type="hidden" name="quota" value="$currentQuota">
                                                    <input type="hidden" name="restoreType" value="quota">
                                                    <input class="btn btn-danger" type="submit" value="Restore Quota"/>
                                                </form>
                                            </td>
                                        </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane" id="moduleDetails">
                        <h2>Modules with Modified Details</h2><br>
                        <table class="table display dataTable table-bordered table-hover text-center" id="modified-modules-details-table">
                            <thead>
                                <tr>
                                    <th>Code</th>
                                    <th>Name</th>
                                    <th>Name modified?</th>
                                    <th>Description modified?</th>
                                    <th>Number of MCs modified?</th>
                                    <th data-sortable="false">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                $if modifiedModulesDetails is None or len(modifiedModulesDetails) == 0:
                                    <tr><td colspan=6>No data found</td></tr>
                                $else:
                                    $for module in modifiedModulesDetails:
                                        $ moduleCode = module[0]
                                        $ moduleName = module[1]
                                        $ isNameModified = module[2][0] is not None
                                        $ isDescModified = module[2][1] is not None
                                        $ isMcModified = module[2][2] is not None
                                        <tr>
                                            <td><a href="/viewModule?code=$moduleCode" target="_blank" data-toggle="tooltip" title="View general info for $moduleCode">$moduleCode</a></td>
                                            <td>$moduleName</td>
                                        $if isNameModified is True:
                                            $ originalName = module[2][0][0]
                                            $ modifiedName = module[2][0][1]
                                             <td>
                                                <b>Modified from</b><br><br>
                                                <i>"$originalName"</i><br><br>
                                                <b>to</b><br><br>
                                                <i>"$modifiedName"</i><br><br>
                                            </td>
                                        $else:
                                            <td>Not modified</td>
                                        $if isDescModified is True:
                                            $ originalDesc = module[2][1][0]
                                            $ modifiedDesc = module[2][1][1]
                                             <td>
                                                <b>Modified from</b><br><br>
                                                <i>"$originalDesc"</i><br><br>
                                                <b>to</b><br><br>
                                                <i>"$modifiedDesc"</i><br><br>
                                            </td>
                                        $else:
                                            <td>Not modified</td>
                                        $if isMcModified is True:
                                            $ originalMc = module[2][2][0]
                                            $ modifiedMc = module[2][2][1]
                                             <td>
                                                <b>Modified from</b><br><br>
                                                <i>"$originalMc"</i><br><br>
                                                <b>to</b><br><br>
                                                <i>"$modifiedMc"</i><br><br>
                                            </td>
                                        $else:
                                            <td>Not modified</td>
                                        $if True:
                                            <td>
                                                <form action="/viewModule" method="get">
                                                    <input type="hidden" name="code" value="$module[0]">
                                                    <input class="btn btn-primary" type="submit" value="View Module"/>
                                                </form>
                                                <form action="/restoreModule" method="post" onsubmit="if(!confirm('Are you sure you want to restore this module\'s details?')){event.preventDefault();}">
                                                    <input type="hidden" name="code" value="$module[0]">
                                                    <input type="hidden" name="restoreType" value="moduleDetails">
                                                    <input class="btn btn-danger" type="submit" value="Restore Details"/>
                                                </form>
                                            </td>
                                        </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
        </div>
    </div>
</div>
<br>
<br>
